"use client";
import{jsx as e}from"react/jsx-runtime";import{useLayoutEffect as t,useEffect as n,useRef as o,memo as r,useMemo as i,useReducer as s,forwardRef as l,useImperativeHandle as c}from"react";import{flushSync as a}from"react-dom";const f=Math.min,u=Math.max,d=Math.abs,h=Array.isArray,_=setTimeout,g=(e,t,n)=>f(n,u(t,e)),p=e=>null!=e,v="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},m=e=>{let t,n;return(...o)=>(t||(t=!0,n=e(...o)),n)},w=-1,S=(e,t,n)=>{const o=n?"unshift":"push";for(let n=0;n<t;n++)e[o](w);return e},y=(e,t)=>{const n=e.t[t];return n===w?e.o:n},b=(e,t,n)=>{const o=e.t[t]===w;return e.t[t]=n,e.i=f(t,e.i),o},z=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,o=e.u[n];for(;n<t;)o+=y(e,n),e.u[++n]=o;return e.i=t,o},x=(e,t,n)=>{let o=z(e,n);for(;n>=0&&n<e.l;)if(o<=t){const r=y(e,n);if(o+r>t)break;o+=r,n++}else o-=y(e,--n);return g(n,0,e.l-1)},I=(e,t,n,o)=>{const r=x(e,t,f(n,e.l-1));return[r,x(e,t+o,r)]},R=(e,t,n)=>{const o=t-e.l,r=o>0;let i;return r?(i=e.o*o,S(e.t,o,n),S(e.u,o)):(i=(n?e.t.splice(0,-o):e.t.splice(o)).reduce(((t,n)=>t+(n===w?e.o:n)),0),e.u.splice(o)),e.i=n?-1:f(t-1,e.i),e.l=t,[i,r]},k="undefined"!=typeof window,C=()=>document.documentElement,M=e=>e.ownerDocument,T=e=>e.defaultView,E=/*#__PURE__*/m((()=>!!k&&"rtl"===getComputedStyle(C()).direction)),H=/*#__PURE__*/m((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),J=/*#__PURE__*/m((()=>"scrollBehavior"in C().style)),O=e=>u(e.h(),e._()),W=(e,t,n)=>u(e-(1===n?1:u(1,t)),0),B=(e,t,n,o)=>f(e+(2===n?1:u(1,t)),o-1),$=(e,t,n)=>t.reduce(((t,[o,r])=>{const i=r-y(e,o);return(!n||i>0)&&(t+=i),t}),0),A=(e,t=40,n=0,o,r=!1,i=0,s=0)=>{let l=!!n,c=[],a=0,h=0,_=0,p=0,v=0,m=!1,x=0,k=0,C=0,M=l?[0,u(n-1,0)]:null,T=[0,0];const E=o||((e,t)=>({o:t,l:e,i:-1,t:S([],e),u:S([],e)}))(e,t),J=new Set,O=new Set,W=()=>(e=>e.l?z(e,e.l-1)+y(e,e.l-1):0)(E),B=()=>W()+i+s,A=()=>u(0,B()-a),D=e=>{H()&&0!==k?v+=e:(p+=e,_++)};return{p:()=>c,v:()=>JSON.parse(JSON.stringify(E)),m:()=>M?[f(T[0],M[0]),u(T[1],M[1])]:x?T:T=I(E,h-i+v+p,T[0],a),S:e=>E.t[e]===w,I:()=>!!M&&E.t.slice(u(0,M[0]-1),f(E.l-1,M[1]+1)+1).includes(w),R:e=>z(E,e)-v,k:e=>y(E,e),C:()=>E.l,M:()=>h,T:()=>k,_:()=>a,H:()=>i,h:W,J:()=>_,O(){const e=p,t=m;return p=0,m=!1,a>B()?[0,!1]:[x=e,t]},W(e,t){const n=[e,t];return J.add(n),()=>{J.delete(n)}},B(e,t){let n,o,i=0;switch(e){case 1:{const e=t.filter((([e,t])=>E.t[e]!==t));if(!e.length)break;let n=0;if(0===h);else if(h>A()-1.5)n=$(E,e,!0);else if(2===C)n=$(E,e);else{const[t]=T;n=$(E,e.filter((([e])=>e<t)))}n&&D(n);for(const[t,n]of e)b(E,t,n)&&r&&O.add(t);if(r&&a){const e=[...O];e.reduce(((e,t)=>e+y(E,t)),0)>a&&(D(((e,t,n)=>{const o=t.map((t=>y(e,t))),r=o[0],i=e.o;return e.i=-1,((e.o=o.every((e=>e===r))?r:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(o))-i)*u(n-t.filter((e=>e<n)).length,0)})(E,e,T[0])),r=!1,O.clear())}i=2,o=!0;break}case 2:a!==t&&(a=t,i=2);break;case 3:if(t[1]){const e=A()-h,[n,o]=R(E,t[0],!0);D(o?n:-f(n,e)),o&&(C=2,m=!0),i=1}else R(E,t[0]);break;case 4:{const e=g(t,0,A()),n=x;if(x=0,e===h)break;const r=e-h,s=d(r);n&&s<d(n)+1||0!==C||(k=r<0?2:1),l&&(M=null,l=!1),o=s>a,h=e,i=5;break}case 5:i=8,0!==k&&(n=!0,i+=1),k=0,C=0,M=null;break;case 6:C=1;break;case 7:M=I(E,t,T[0],a),i=1}i&&(c=[],n&&v&&(p+=v,v=0,_++),J.forEach((([e,t])=>{i&e&&t(o)})))}}},D=k?t:n,L=(e,t)=>t&&E()?-e:e,P=(e,t,n,o,r)=>{const i=Date.now;let s=0,l=!1,c=!1,a=!1,f=!1;const u=(()=>{let t;const n=()=>{p(t)&&clearTimeout(t)},o=()=>{n(),t=_((()=>{t=null,(()=>{if(l||c)return l=!1,void u();a=!1,e.B(5)})()}),150)};return o.$=n,o})(),d=()=>{s=i(),a&&(f=!0),e.B(4,o()),u()},h=t=>{if(l||0===e.T()||t.ctrlKey)return;const o=i()-s;150>o&&50<o&&(n?t.deltaX:t.deltaY)&&(l=!0)},g=()=>{c=!0,a=f=!1},v=()=>{c=!1,H()&&(a=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",h,{passive:!0}),t.addEventListener("touchstart",g,{passive:!0}),t.addEventListener("touchend",v,{passive:!0}),{A:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",h),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",v),u.$()},D:()=>{const[t,n]=e.O();if(t)return r(t,f),f=!1,n}}},V=(e,t)=>{let n,o,r;const i=t?"scrollLeft":"scrollTop",s=t?"overflowX":"overflowY",l=async(o,s)=>{if(!n)return void v((()=>l(o,s)));r&&r();const c=()=>{let t;return[new Promise(((e,n)=>{t=e,_(r=n,150)})),e.W(2,(()=>{t&&t()}))]};if(s&&J()){for(;e.B(7,o()),e.I();){const[e,t]=c();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:L(o(),t),behavior:"smooth"})}else for(;;){const[r,s]=c();try{n[i]=L(o(),t),e.B(6),await r}catch(e){return}finally{s()}}};return{L(r){n=r,o=P(e,r,t,(()=>L(r[i],t)),((e,n)=>{if(n){const e=r.style,t=e[s];e[s]="hidden",_((()=>{e[s]=t}))}r[i]+=L(e,t)}))},A(){o&&o.A()},P(e){l((()=>e))},V(t){t+=e.M(),l((()=>t))},X(t,{align:n,smooth:o}={}){if(t=g(t,0,e.C()-1),"nearest"===n){const o=e.R(t),r=e.M();if(o<r)n="start";else{if(!(o+e.k(t)>r+e._()))return;n="end"}}l((()=>e.H()+("end"===n?e.R(t)+e.k(t)-e._():"center"===n?e.R(t)+(e.k(t)-e._())/2:e.R(t))),o)},D:()=>{o&&o.D()&&r&&r()}}},X=(e,t)=>{let n;return{L(o){const r=t?"scrollX":"scrollY",i=M(o),s=T(i),l=i.body,c=(e,t,n,o=0)=>{const r=n?"offsetLeft":"offsetTop",i=o+(n&&E()?s.innerWidth-e[r]-e.offsetWidth:e[r]),l=e.offsetParent;return e!==t&&l?c(l,t,n,i):i};n=P(e,s,t,(()=>L(s[r],t)-c(o,l,t)),(e=>{s.scrollBy(t?L(e,t):0,t?0:e)}))},A(){n&&n.A()},D:()=>{n&&n.D()}}},Y="current",j=(e,t)=>{if(h(e))for(const n of e)j(n,t);else p(e)&&"boolean"!=typeof e&&t.push(e)},q=(e,t)=>{const n=e.key;return p(n)?n:"_"+t},N=e=>{const t=o();return t[Y]||(t[Y]=e())},U=e=>{const t=o(e);return D((()=>{t[Y]=e}),[e]),t},F=e=>{let t;return{L(n){(t||(t=new(T(M(n)).ResizeObserver)(e))).observe(n)},Y(e){t.unobserve(e)},A(){t&&t.disconnect()}}},G=(e,t)=>{let n;const o=t?"width":"height",r=new WeakMap,i=F((t=>{const i=[];for(const{target:s,contentRect:l}of t)if(s.offsetParent)if(s===n)e.B(2,l[o]);else{const e=r.get(s);p(e)&&i.push([e,l[o]])}i.length&&e.B(1,i)}));return{j(e){i.L(n=e)},q:(e,t)=>(r.set(e,t),i.L(e),()=>{r.delete(e),i.Y(e)}),A:i.A}},K=(e,t)=>{const n=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,i=F((t=>{const o=[];for(const{target:e,contentRect:i}of t){if(!e.offsetParent)continue;const t=r.get(e);p(t)&&o.push([t,i[n]])}o.length&&e.B(1,o)}));let s;return{j(t){const n=T(M(t)),r=()=>{e.B(2,n[o])};n.addEventListener("resize",r),r(),s=()=>{n.removeEventListener("resize",r)}},q:(e,t)=>(r.set(e,t),i.L(e),()=>{r.delete(e),i.Y(e)}),A(){s&&s(),i.A()}}},Q=(e,t)=>{let n;const o="height",r="width",i=new WeakMap,s=new Set,l=new Set,c=new Map,a=(e,t)=>`${e}-${t}`,f=F((f=>{const d=new Set,h=new Set;for(const{target:s,contentRect:l}of f)if(s.offsetParent)if(s===n)e.B(2,l[o]),t.B(2,l[r]);else{const e=i.get(s);if(e){const[t,n]=e,i=a(t,n),s=c.get(i),f=[l[o],l[r]];let u,_;s?(s[0]!==f[0]&&(u=!0),s[1]!==f[1]&&(_=!0)):u=_=!0,u&&d.add(t),_&&h.add(n),(u||_)&&c.set(i,f)}}if(d.size){const t=[];d.forEach((e=>{let n=0;l.forEach((t=>{const o=c.get(a(e,t));o&&(n=u(n,o[0]))})),n&&t.push([e,n])})),e.B(1,t)}if(h.size){const e=[];h.forEach((t=>{let n=0;s.forEach((e=>{const o=c.get(a(e,t));o&&(n=u(n,o[1]))})),n&&e.push([t,n])})),t.B(1,e)}}));return{j(e){f.L(n=e)},q:(e,t,n)=>(i.set(e,[t,n]),s.add(t),l.add(n),f.L(e),()=>{i.delete(e),f.Y(e)}),A:f.A}},Z=/*#__PURE__*/r((({N:t,U:n,F:r,G:s,K:l,Z:c,ee:a,te:f})=>{const u=o(null);D((()=>n(u[Y],r)),[r]);const d=i((()=>{const e={margin:0,padding:0,position:l&&f?void 0:"absolute",[a?"height":"width"]:"100%",[a?"top":"left"]:0,[a?E()?"right":"left":"top"]:s,visibility:!l||f?"visible":"hidden"};return a&&(e.display="flex"),e}),[s,l,f]);return e(c,"string"==typeof c?{ref:u,style:d,children:t}:{ref:u,style:d,index:r,children:t})})),ee=e=>s(e.p,void 0,e.p)[1],te=(e,t)=>i((()=>{if("function"==typeof e)return[e,t||0];const n=(e=>{const t=[];return j(e,t),t})(e);return[e=>n[e],n.length]}),[e,t]),ne=/*#__PURE__*/l((({children:t,count:r,overscan:i=4,itemSize:s,shift:l,horizontal:f,cache:u,startMargin:d,endMargin:h,ssrCount:_,as:g="div",item:p="div",scrollRef:m,onScroll:w,onScrollEnd:S,onRangeChange:y},b)=>{const[z,x]=te(t,r),I=o(null),R=o(!!_),k=U(w),C=U(S),[M,T,E,H]=N((()=>{const e=!!f,t=A(x,s,_,u,!s,d,h);return[t,G(t,e),V(t,e),e]}));x!==M.C()&&M.B(3,[x,l]);const J=ee(M),[$,L]=M.m(),P=M.T(),X=M.J(),j=M.h(),F=[];D((()=>{R[Y]=!1;const e=M.W(3,(e=>{e?a(J):J()})),t=M.W(4,(()=>{k[Y]&&k[Y](M.M())})),n=M.W(8,(()=>{C[Y]&&C[Y]()})),o=e=>{T.j(e),E.L(e)};return m?v((()=>o(m[Y]))):o(I[Y].parentElement),()=>{e(),t(),n(),T.A(),E.A()}}),[]),D((()=>{E.D()}),[X]),n((()=>{y&&y($,L)}),[$,L]),c(b,(()=>({get cache(){return M.v()},get scrollOffset(){return M.M()},get scrollSize(){return O(M)},get viewportSize(){return M._()},scrollToIndex:E.X,scrollTo:E.P,scrollBy:E.V})),[]);for(let t=W($,i,P),n=B(L,i,P,x);t<=n;t++){const n=z(t);F.push(e(Z,{U:T.q,F:t,G:M.R(t),K:M.S(t),Z:p,N:n,ee:H,te:R[Y]},q(n,t)))}return e(g,{ref:I,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:H?j:"100%",height:H?"100%":j,pointerEvents:0!==P?"none":"auto"},children:F})})),oe=/*#__PURE__*/l((({children:t,count:n,overscan:r,itemSize:i,shift:s,horizontal:l,reverse:c,cache:a,ssrCount:f,item:u,onScroll:d,onScrollEnd:h,onRangeChange:_,style:g,...p},v)=>{const m=o(null),w=c&&!l;let S=e(ne,{ref:v,scrollRef:w?m:void 0,count:n,overscan:r,itemSize:i,shift:s,horizontal:l,cache:a,ssrCount:f,item:u,onScroll:d,onScrollEnd:h,onRangeChange:_,children:t});return w&&(S=e("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:S})),e("div",{ref:m,...p,style:{display:l?"inline-block":"block",[l?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...g},children:S})})),re=/*#__PURE__*/l((({children:t,count:r,overscan:i=4,itemSize:s,shift:l,horizontal:f,cache:u,ssrCount:d,as:h="div",item:_="div",onScrollEnd:g,onRangeChange:p},v)=>{const[m,w]=te(t,r),S=o(null),y=U(g),b=o(!!d),[z,x,I,R]=N((()=>{const e=!!f,t=A(w,s,d,u,!s);return[t,K(t,e),X(t,e),e]}));w!==z.C()&&z.B(3,[w,l]);const k=ee(z),[C,M]=z.m(),T=z.T(),E=z.J(),H=z.h(),J=[];D((()=>{b[Y]=!1;const e=z.W(3,(e=>{e?a(k):k()})),t=z.W(8,(()=>{y[Y]&&y[Y]()})),n=S[Y];return x.j(n),I.L(n),()=>{e(),t(),x.A(),I.A()}}),[]),D((()=>{I.D()}),[E]),n((()=>{p&&p(C,M)}),[C,M]),c(v,(()=>({get cache(){return z.v()}})),[]);for(let t=W(C,i,T),n=B(M,i,T,w);t<=n;t++){const n=m(t);J.push(e(Z,{U:x.q,F:t,G:z.R(t),K:z.S(t),Z:_,N:n,ee:R,te:b[Y]},q(n,t)))}return e(h,{ref:S,style:{flex:"none",position:"relative",visibility:"hidden",width:R?H:"100%",height:R?"100%":H,pointerEvents:0!==T?"none":"auto"},children:J})})),ie=(e,t)=>`${e}-${t}`,se=/*#__PURE__*/r((({N:t,U:n,ne:r,oe:s,re:l,ie:c,se:a,le:f,K:u,Z:d})=>{const h=o(null);return D((()=>n.q(h[Y],r,s)),[s,r]),e(d,{ref:h,style:i((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:l,[E()?"right":"left"]:c,visibility:u?"hidden":"visible",minHeight:a,minWidth:f})),[l,c,f,a,u]),children:t})})),le=/*#__PURE__*/l((({children:t,row:n,col:r,cellHeight:s=40,cellWidth:l=100,overscan:f=2,initialRowCount:u,initialColCount:d,item:h="div",style:_,...g},p)=>{const[v,m,w,S,y]=N((()=>{const e=A(n,s,u),t=A(r,l,d);return[e,t,Q(e,t),V(e,!1),V(t,!0)]}));n!==v.C()&&v.B(3,[n]),r!==m.C()&&m.B(3,[r]);const b=ee(v),z=ee(m),[x,I]=v.m(),[R,k]=m.m(),C=v.T(),M=m.T(),T=v.J(),E=m.J(),H=O(v),J=O(m),$=o(null);D((()=>{const e=$[Y],t=v.W(3,(e=>{e?a(b):b()})),n=m.W(3,(e=>{e?a(z):z()}));return w.j(e),S.L(e),y.L(e),()=>{t(),n(),w.A(),S.A(),y.A()}}),[]),D((()=>{S.D()}),[T]),D((()=>{y.D()}),[E]),c(p,(()=>({get scrollOffset(){return[m.M(),v.M()]},get scrollSize(){return[O(m),O(v)]},get viewportSize(){return[m._(),v._()]},scrollToIndex(e,t){y.X(e),S.X(t)},scrollTo(e,t){y.P(e),S.P(t)},scrollBy(e,t){y.V(e),S.V(t)}})),[]);const L=i((()=>{const e=new Map;return(n,o)=>{let r=e.get(ie(n,o));return r||e.set(ie(n,o),r=t({rowIndex:n,colIndex:o})),r}}),[t]),P=W(x,f,C),X=B(I,f,C,n),j=W(R,f,M),q=B(k,f,M,r),U=[];for(let t=P;t<=X;t++)for(let n=j;n<=q;n++)U.push(e(se,{U:w,ne:t,oe:n,re:v.R(t),ie:m.R(n),se:v.k(t),le:m.k(n),K:v.S(t)||m.S(n),Z:h,N:L(t,n)},ie(t,n)));return e("div",{ref:$,...g,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",..._},children:e("div",{style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:J,height:H,pointerEvents:0!==C||0!==M?"none":"auto"},children:U})})}));export{oe as VList,ne as Virtualizer,re as WindowVirtualizer,le as experimental_VGrid};
//# sourceMappingURL=index.mjs.map
