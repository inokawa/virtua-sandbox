"use client";
import{jsx as e}from"react/jsx-runtime";import{useLayoutEffect as t,useEffect as n,useRef as o,forwardRef as r,useMemo as i,memo as s,useReducer as l,useImperativeHandle as c}from"react";import{flushSync as a}from"react-dom";const u=Math.min,h=Math.max,d=Math.abs,f=Date.now,_=Object.values,w=Array.isArray,g=setTimeout,m=(e,t,n)=>u(n,h(t,e)),p=e=>null!=e,v=(e,t)=>{let n;const o=()=>{p(n)&&clearTimeout(n)},r=()=>{o(),n=g((()=>{n=null,e()}),t)};return r.t=o,r},b=e=>{let t,n;return(...o)=>(t||(t=!0,n=e(...o)),n)},S=e=>getComputedStyle(e),I=e=>e?parseFloat(e):0,z=-1,y=(e,t)=>{const n=e.o[t];return n===z?e.i:n},x=(e,t)=>{if(!e.l)return 0;if(e.u>=t)return e.h[t];let n=e.u,o=e.h[n];for(;n<t;)o+=y(e,n),e.h[++n]=o;return e.u=t,o},R=(e,t,n)=>{let o=x(e,n);for(;n>=0&&n<e.l;)if(o<=t){const r=y(e,n);if(o+r>t)break;o+=r,n++}else o-=y(e,--n);return m(n,0,e.l-1)},k=(e,t,n,o)=>{const r=R(e,t,u(n,e.l-1));return[r,R(e,t+o,r)]},O=(e,t,n)=>{const o=n?"unshift":"push";for(let n=e.l;n<t;n++)e.o[o](z),e.h.push(0===n?0:z);e.l=t},C=(e,t,n)=>{const o=t-e.l,r=o<0;let i;return r?(i=(n?e.o.splice(0,-o):e.o.splice(o)).reduce(((t,n)=>t+(n===z?e.i:n)),0),e.h.splice(o)):(i=e.i*o,O(e,e.l+o,n)),e.u=n?0:m(t-1,0,e.u),e.l=t,[i,r]},T="undefined"!=typeof window,M=()=>document.documentElement,H=/*#__PURE__*/b((e=>{const t="scrollLeft",n=e[t];e[t]=1;const o=e[t]<1;return e[t]=n,o})),J=/*#__PURE__*/b((()=>!!T&&"rtl"===S(M()).direction)),W=/*#__PURE__*/b((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),B=/*#__PURE__*/b((()=>"scrollBehavior"in M().style)),L=(e,t,n)=>t.reduce(((t,[o,r])=>{const i=r-y(e,o);return(!n||i>0)&&(t+=i),t}),0),$=(e,t=40,n=0,o=((e,t)=>{const n={i:t,l:0,u:0,o:[],h:[]};return O(n,e),n})(e,t),r,i)=>{let s=t*h(n-1,0),l=0,c=0,a=0,f=0,_=0,w=0,g=0,p=!1,v=null,b=!1,S=[0,n];const I=new Set,R=()=>(e=>e.l?x(e,e.l-1)+y(e,e.l-1):0)(o),T=()=>R()-s+c,M=e=>m(e,0,T()),H=e=>{W()&&0!==g?w+=e:(_+=e,f++)},J=e=>{const t=g;return g=e,g!==t};return{_:()=>JSON.parse(JSON.stringify(o)),g:()=>v?[u(S[0],v[0]),h(S[1],v[1])]:S=k(o,a+w,S[0],s),m:e=>o.o[e]===z,p:()=>!!v&&o.o.slice(h(0,v[0]-1),u(o.l-1,v[1]+1)+1).includes(z),v(e){const t=x(o,e)-w;return r?t+h(0,s-R()):t},S:e=>y(o,e),I:()=>o.l,R:()=>a,k:T,O:()=>g,C:()=>s,T:()=>l,M:()=>h(R(),s),H:()=>f,J(){const e=_;return _=0,e},W(e,t){const n=[e,t];return I.add(n),()=>{I.delete(n)}},B(e,t){let n,r,h=0;switch(e){case 1:{const e=t.filter((([e,t])=>o.o[e]!==t));if(!e.length)break;let n=0;if(0===a);else if(a>T()-1.5)n=L(o,e,!0);else{const[t]=S;n=L(o,e.filter((([e])=>e<t)))}n&&H(n);let s=!1;e.forEach((([e,t])=>{((e,t,n)=>{const o=e.o[t]===z;return e.o[t]=n,e.u=u(t,e.u),o})(o,e,t)&&(s=!0)})),i&&s&&!a&&(e=>{const t=e.o.filter((e=>e!==z)),n=t[0];e.i=t.every((e=>e===n))?n:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(t)})(o),h+=2,b=r=!0;break}case 2:{const e=t[0]+t[1]+t[2];s!==e&&(s=e,l=t[1],c=t[2],h=2);break}case 3:if(t[1]){const e=T()-a,[n,r]=C(o,t[0],!0),i=r?-u(n,e):n;H(i),W()||(a=M(a+i)),h=1}else C(o,t[0]);break;case 4:{if(a===t)break;const e=t-a,n=b;b=!1,0!==g&&n||p||J(e<0?2:1),r=d(e)>s,h+=4,a=M(t),h+=1;break}case 5:J(0)&&(n=!0,h=1),p=!1,v=null;break;case 6:p=!0;break;case 7:v=k(o,t,S[0],s),h=1}h&&(n&&w&&(b=!0,_+=w,w=0,f++),I.forEach((([e,t])=>{h&e&&t(r)})))}}},P=T?t:n,j=(e,t,n)=>(()=>{let o=f()-50;return(...r)=>{const i=f();o+50<i&&(o=i,(o=>{if(0!==e.O()&&!o.ctrlKey&&(t?o.deltaX:o.deltaY)){const t=e.R();t>0&&t<e.k()&&n()}})(...r))}})(),D=(e,t,n,o)=>H(e)||o?-n:t.k()-n,N=(e,t)=>{let n,o,r=!1;const i=t?"scrollLeft":"scrollTop",s=(o,r)=>t&&J()?D(n,e,o,r):o,l=async(r,l)=>{if(!n)return;o&&o();const c=()=>m(r(),0,e.k()),a=()=>{let t;return[new Promise(((e,n)=>{t=e,g(o=n,150)})),e.W(2,(()=>{t&&t()}))]};if(l&&B()){for(;e.B(7,c()),e.p();){const[e,t]=a();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:s(c()),behavior:"smooth"})}else for(;;){const[t,o]=a();try{n[i]=s(c()),e.B(6),await t}catch(e){return}finally{o()}}};return{L(o){n=o;let l=!1,c=!1;const a=v((()=>{l?a():(c=!1,e.B(5))}),150),u=()=>{c&&(r=!0),e.B(4,s(o[i])),a()},h=j(e,t,a),d=()=>{l=!0,c=r=!1},f=()=>{l=!1,W()&&(c=!0)};return o.addEventListener("scroll",u),o.addEventListener("wheel",h,{passive:!0}),o.addEventListener("touchstart",d,{passive:!0}),o.addEventListener("touchend",f,{passive:!0}),()=>{o.removeEventListener("scroll",u),o.removeEventListener("wheel",h),o.removeEventListener("touchstart",d),o.removeEventListener("touchend",f),a.t()}},$(e){l((()=>e))},P(t){t+=e.R(),l((()=>t))},j(t,{align:n,smooth:o}={}){t=m(t,0,e.I()-1),l("end"===n?()=>e.T()+e.v(t)+e.S(t)-e.C():"center"===n?()=>e.T()+e.v(t)+(e.S(t)-e.C())/2:()=>e.T()+e.v(t),o)},D:e=>{if(n){if(r){const e=n.style.overflow;n.style.overflow="hidden",r=!1,g((()=>{n.style.overflow=e}))}n[i]+=s(e,!0)}}}},U=(e,t)=>{let n;const o=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop",i=(o,r)=>t&&J()?D(n,e,o,r):o;return{L(s){n=s;let l=!1;const c=(e,n)=>{const o=n+(t&&J()?window.innerWidth-e[r]-e.offsetWidth:e[r]),i=e.offsetParent;return e!==document.body&&i?c(i,o):o},a=v((()=>{e.B(5)}),150),u=()=>{l&&(e.B(4,i(window[o])-c(s,0)),a())},h=j(e,t,a),d=new IntersectionObserver((([e])=>{l=e.isIntersecting}));return d.observe(s),window.addEventListener("scroll",u),window.addEventListener("wheel",h,{passive:!0}),()=>{d.disconnect(),window.removeEventListener("scroll",u),window.removeEventListener("wheel",h),a.t()}},D:e=>{window.scrollBy(t?i(e,!0):0,t?0:e)}}},V="current",A={},E=(e,t)=>{if(w(e))for(const n of e)E(n,t);else p(e)&&"boolean"!=typeof e&&t.push(e)},F=e=>{const t=[];return E(e,t),t},X=(e,t,n)=>h(e-(1===n?1:h(1,t)),0),Y=(e,t,n,o)=>u(e+(2===n?1:h(1,t)),o-1),q=e=>{const t=o();return t[V]||(t[V]=e())},G=e=>{const t=o(e);return P((()=>{t[V]=e}),[e]),t},K={box:"border-box"},Q=(e,t)=>{let n;const o=t?"width":"height",r=new WeakMap,i=b((()=>new ResizeObserver((i=>{const s=[];for(const{target:l,contentRect:c}of i)if(l.offsetParent)if(l===n)e.B(2,[c[o],c[t?"left":"top"],I(S(n)[t?"paddingRight":"paddingBottom"])]);else{const e=r.get(l);p(e)&&s.push([e,c[o]])}s.length&&e.B(1,s)}))));return{N(e){n=e;const t=i();return t.observe(e,K),()=>{t.disconnect()}},U(e,t){const n=i();return r.set(e,t),n.observe(e),()=>{r.delete(e),n.unobserve(e)}}}},Z=(e,t)=>{const n=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,i=b((()=>new ResizeObserver((t=>{const o=[];for(const{target:e,contentRect:i}of t){if(!e.offsetParent)continue;const t=r.get(e);p(t)&&o.push([t,i[n]])}o.length&&e.B(1,o)}))));return{N(){const t=()=>{e.B(2,[window[o],0,0])};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t),i().disconnect()}},U(e,t){const n=i();return r.set(e,t),n.observe(e),()=>{r.delete(e),n.unobserve(e)}}}},ee=(e,t)=>{let n;const o="height",r="width",i=new WeakMap,s=new Set,l=new Set,c=new Map,a=(e,t)=>`${e}-${t}`,u=b((()=>new ResizeObserver((u=>{const d=new Set,f=new Set;for(const{target:s,contentRect:l}of u)if(s.offsetParent)if(s===n){const i=S(n);e.B(2,[l[o],l.top,I(i.paddingBottom)]),t.B(2,[l[r],l.left,I(i.paddingRight)])}else{const e=i.get(s);if(e){const[t,n]=e,i=a(t,n),s=c.get(i),u=[l[o],l[r]];let h,_;s?(s[0]!==u[0]&&(h=!0),s[1]!==u[1]&&(_=!0)):h=_=!0,h&&d.add(t),_&&f.add(n),(h||_)&&c.set(i,u)}}if(d.size){const t=[];d.forEach((e=>{let n=0;l.forEach((t=>{const o=c.get(a(e,t));o&&(n=h(n,o[0]))})),n&&t.push([e,n])})),e.B(1,t)}if(f.size){const e=[];f.forEach((t=>{let n=0;s.forEach((e=>{const o=c.get(a(e,t));o&&(n=h(n,o[1]))})),n&&e.push([t,n])})),t.B(1,e)}}))));return{N(e){n=e;const t=u();return t.observe(e,K),()=>{t.disconnect()}},U(e,t,n){const o=u();return i.set(e,[t,n]),s.add(t),l.add(n),o.observe(e),()=>{i.delete(e),o.unobserve(e)}}}},te=/*#__PURE__*/r((({children:t,attrs:n,width:o,height:r,scrolling:s},l)=>e("div",{ref:l,...n,children:e("div",{style:i((()=>({position:"relative",visibility:"hidden",width:null!=o?o:"100%",height:null!=r?r:"100%",pointerEvents:s?"none":"auto"})),[o,r,s]),children:t})}))),ne=/*#__PURE__*/s((({V:t,A:n,F:r,X:s,Y:l,q:c,G:a})=>{const u=o(null);return P((()=>n.U(u[V],r)),[r]),e(c,{ref:u,style:i((()=>{const e={margin:0,padding:0,position:"absolute",[a?"height":"width"]:"100%",[a?"top":"left"]:0,[a?J()?"right":"left":"top"]:s,visibility:l?"hidden":"visible"};return a&&(e.display="flex"),e}),[s,l]),children:t})})),oe=()=>[],re=()=>l(oe,void 0,oe)[1],ie=/*#__PURE__*/r((({children:t,overscan:r=4,initialItemSize:s,initialItemCount:l,shift:u,horizontal:h,reverse:d,cache:f,components:{Root:w=te,Item:g="div"}=A,onScroll:m,onScrollStop:v,onRangeChange:b,...S},I)=>{const z=i((()=>F(t)),[t]),y=z.length,x=G(m),R=G(v),[k,O,C,T]=q((()=>{const e=!!h,t=$(y,s,l,f,!!d,!s);return[t,Q(t,e),N(t,e),e]}));y!==k.I()&&k.B(3,[y,u]);const M=re(),[H,J]=k.g(),W=k.O(),B=k.H(),L=k.M(),j=o(null),D=0!==W;P((()=>{const e=j[V],t=O.N(e),n=C.L(e),o=k.W(3,(e=>{e?a(M):M()})),r=k.W(4,(()=>{x[V]&&x[V](k.R())}));return()=>{t(),n(),o(),r()}}),[]),P((()=>{const e=k.J();e&&C.D(e)}),[B]),n((()=>{D||R[V]&&R[V]()}),[D]),n((()=>{b&&b(H,J)}),[H,J]),c(I,(()=>({get cache(){return k._()},get scrollOffset(){return k.R()},get scrollSize(){return k.M()},get viewportSize(){return k.C()},scrollToIndex:C.j,scrollTo:C.$,scrollBy:C.P})),[]);const U=X(H,r,W),E=Y(J,r,W,y),K=[];for(let t=U;t<=E;t++){const n=z[t],o=n.key;K.push(e(ne,{A:O,F:t,X:k.v(t),Y:k.m(t),q:g,V:n,G:T},p(o)?o:"_"+t))}return e(w,{ref:j,width:T?L:void 0,height:T?void 0:L,scrolling:D,attrs:i((()=>({...S,style:{overflow:"auto",display:T?"inline-block":"block",contain:"strict",width:"100%",height:"100%",...S.style}})),_(S)),children:K})})),se=(e,t)=>`${e}-${t}`,le=/*#__PURE__*/s((({V:t,A:n,K:r,Z:s,ee:l,te:c,ne:a,oe:u,Y:h,q:d})=>{const f=o(null);return P((()=>n.U(f[V],r,s)),[s,r]),e(d,{ref:f,style:i((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:l,[J()?"right":"left"]:c,visibility:h?"hidden":"visible",minHeight:a,minWidth:u})),[l,c,u,a,h]),children:t})})),ce=/*#__PURE__*/r((({children:t,row:n,col:r,cellHeight:s=40,cellWidth:l=100,overscan:u=2,initialRowCount:h,initialColCount:d,components:{Root:f=te,Cell:w="div"}=A,...g},m)=>{const[p,v,b,S,I]=q((()=>{const e=$(n,s,h),t=$(r,l,d);return[e,t,ee(e,t),N(e,!1),N(t,!0)]}));n!==p.I()&&p.B(3,[n]),r!==v.I()&&v.B(3,[r]);const z=re(),[y,x]=p.g(),[R,k]=v.g(),O=p.O(),C=v.O(),T=p.H(),M=v.H(),H=p.M(),J=v.M(),W=o(null),B=0!==O,L=0!==C;P((()=>{const e=W[V],t=b.N(e),n=S.L(e),o=I.L(e),r=e=>{e?a(z):z()},i=p.W(3,r),s=v.W(3,r);return()=>{t(),n(),o(),i(),s()}}),[]),P((()=>{const e=p.J();e&&S.D(e)}),[T]),P((()=>{const e=v.J();e&&I.D(e)}),[M]),c(m,(()=>({get scrollOffset(){return[v.R(),p.R()]},get scrollSize(){return[v.M(),p.M()]},get viewportSize(){return[v.C(),p.C()]},scrollToIndex(e,t){I.j(e),S.j(t)},scrollTo(e,t){I.$(e),S.$(t)},scrollBy(e,t){I.P(e),S.P(t)}})),[]);const j=i((()=>{const e=new Map;return(n,o)=>{let r=e.get(se(n,o));return r||e.set(se(n,o),r=t({rowIndex:n,colIndex:o})),r}}),[t]),D=X(y,u,O),U=Y(x,u,O,n),E=X(R,u,C),F=Y(k,u,C,r),G=[];for(let t=D;t<=U;t++)for(let n=E;n<=F;n++)G.push(e(le,{A:b,K:t,Z:n,ee:p.v(t),te:v.v(n),ne:p.S(t),oe:v.S(n),Y:p.m(t)||v.m(n),q:w,V:j(t,n)},se(t,n)));return e(f,{ref:W,width:J,height:H,scrolling:B||L,attrs:i((()=>({...g,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...g.style}})),_(g)),children:G})})),ae=/*#__PURE__*/r((({children:t,overscan:r=4,initialItemSize:s,initialItemCount:l,horizontal:u,cache:h,components:{Root:d=te,Item:f="div"}=A,onScrollStop:w,onRangeChange:g,...m},v)=>{const b=i((()=>F(t)),[t]),S=b.length,I=G(w),[z,y,x,R]=q((()=>{const e=!!u,t=$(S,s,l,h,!1,!s);return[t,Z(t,e),U(t,e),e]}));S!==z.I()&&z.B(3,[S]);const k=re(),[O,C]=z.g(),T=z.O(),M=z.H(),H=z.M(),J=o(null),W=0!==T;P((()=>{const e=J[V],t=y.N(e),n=x.L(e);return z.W(3,(e=>{e?a(k):k()})),()=>{t(),n()}}),[]),P((()=>{const e=z.J();e&&x.D(e)}),[M]),n((()=>{W||I[V]&&I[V]()}),[W]),n((()=>{g&&g(O,C)}),[O,C]),c(v,(()=>({get cache(){return z._()}})),[]);const B=X(O,r,T),L=Y(C,r,T,S),j=[];for(let t=B;t<=L;t++){const n=b[t],o=n.key;j.push(e(ne,{A:y,F:t,X:z.v(t),Y:z.m(t),q:f,V:n,G:R},p(o)?o:"_"+t))}return e(d,{ref:J,width:R?H:void 0,height:R?void 0:H,scrolling:W,attrs:i((()=>({...m,style:{display:R?"inline-block":"block",width:R?"auto":"100%",height:R?"100%":"auto",...m.style}})),_(m)),children:j})}));export{ce as VGrid,ie as VList,ae as WVList};
//# sourceMappingURL=index.mjs.map
