"use client";
var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");const r=Math.min,o=Math.max,i=Math.abs,s=Date.now,l=Object.values,c=Array.isArray,a=setTimeout,h=(e,t,n)=>r(n,o(t,e)),d=e=>null!=e,u=e=>{let t,n;return(...r)=>(t||(t=!0,n=e(...r)),n)},f=-1,_=(e,t,n)=>{const r=n?"unshift":"push";for(let n=0;n<t;n++)e[r](f);return e},g=(e,t)=>{const n=e.t[t];return n===f?e.o:n},w=(e,t)=>{if(!e.i)return 0;if(e.l>=t)return e.h[t];e.l<0&&(e.h[0]=0,e.l=0);let n=e.l,r=e.h[n];for(;n<t;)r+=g(e,n),e.h[++n]=r;return e.l=t,r},v=(e,t,n)=>{let r=w(e,n);for(;n>=0&&n<e.i;)if(r<=t){const o=g(e,n);if(r+o>t)break;r+=o,n++}else r-=g(e,--n);return h(n,0,e.i-1)},p=(e,t,n,o)=>{const i=v(e,t,r(n,e.i-1));return[i,v(e,t+o,i)]},m=(e,t,n)=>{const o=t-e.i,i=o>0;let s;return i?(s=e.o*o,_(e.t,o,n),_(e.h,o)):(s=(n?e.t.splice(0,-o):e.t.splice(o)).reduce(((t,n)=>t+(n===f?e.o:n)),0),e.h.splice(o)),e.l=n?-1:r(t-1,e.l),e.i=t,[s,i]},S="undefined"!=typeof window,b=()=>document.documentElement,z=/*#__PURE__*/u((e=>{const t="scrollLeft",n=e[t];e[t]=1;const r=e[t]<1;return e[t]=n,r})),y=/*#__PURE__*/u((()=>{return!!S&&"rtl"===(e=b(),getComputedStyle(e)).direction;var e})),x=/*#__PURE__*/u((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),R=/*#__PURE__*/u((()=>"scrollBehavior"in b().style)),I=e=>o(e.u(),e._()),C=(e,t,n)=>o(e-(1===n?1:o(1,t)),0),k=(e,t,n,i)=>r(e+(2===n?1:o(1,t)),i-1),O=(e,t,n)=>t.reduce(((t,[r,o])=>{const i=o-g(e,r);return(!n||i>0)&&(t+=i),t}),0),M=(e,t=40,n=0,s=((e,t)=>({o:t,i:e,l:-1,t:_([],e),h:_([],e)}))(e,t),l,c=0,a=0)=>{let d=!!n,u=[],v=0,S=0,b=0,z=0,y=0,R=0,I=0,C=0,k=d?[0,o(n-1,0)]:null,M=[0,0];const T=new Set,E=()=>(e=>e.i?w(e,e.i-1)+g(e,e.i-1):0)(s),H=()=>E()+c+a,J=()=>o(0,H()-v),W=e=>{x()&&0!==I?y+=e:(z+=e,b++)};return{v:()=>u,p:()=>JSON.parse(JSON.stringify(s)),m:()=>k?[r(M[0],k[0]),o(M[1],k[1])]:R?M:M=p(s,S-c+y+z,M[0],v),S:e=>s.t[e]===f,R:()=>!!k&&s.t.slice(o(0,k[0]-1),r(s.i-1,k[1]+1)+1).includes(f),I:e=>w(s,e)-y,C:e=>g(s,e),k:()=>s.i,O:()=>S,M:J,T:()=>I,_:()=>v,H:()=>c,J:()=>a,u:E,W:()=>b,B:()=>v>H()?z=0:(R=z,z=0,R),L(e,t){const n=[e,t];return T.add(n),()=>{T.delete(n)}},$(e,t){let n,o,c=0;switch(e){case 1:{const e=t.filter((([e,t])=>s.t[e]!==t));if(!e.length)break;let n=0;if(0===S);else if(S>J()-1.5)n=O(s,e,!0);else if(2===C)n=O(s,e);else{const[t]=M;n=O(s,e.filter((([e])=>e<t)))}n&&W(n);let i=!1;e.forEach((([e,t])=>{((e,t,n)=>{const o=e.t[t]===f;return e.t[t]=n,e.l=r(t,e.l),o})(s,e,t)&&(i=!0)})),l&&i&&!S&&(e=>{const t=e.t.filter((e=>e!==f)),n=t[0];e.o=t.every((e=>e===n))?n:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(t)})(s),c=2,o=!0;break}case 2:v!==t&&(v=t,c=2);break;case 3:if(t[1]){const e=J()-S,[n,o]=m(s,t[0],!0);W(o?n:-r(n,e)),o&&(C=2),c=1}else m(s,t[0]);break;case 4:{const e=h(t,0,J()),n=R;if(R=0,e===S)break;const r=e-S,s=i(r);n&&s<i(n)+1||0!==C||(I=r<0?2:1),d&&(k=null,d=!1),o=s>v,S=e,c=5;break}case 5:c=8,0!==I&&(n=!0,c+=1),I=0,C=0,k=null;break;case 6:C=1;break;case 7:k=p(s,t,M[0],v),c=1}c&&(u=[],n&&y&&(z+=y,y=0,b++),T.forEach((([e,t])=>{c&e&&t(o)})))}}},T=S?t.useLayoutEffect:t.useEffect,E=(e,t,n,r,o)=>{let i=!1,l=!1,c=!1;const h=(()=>{let t;const n=()=>{d(t)&&clearTimeout(t)},r=()=>{n(),t=a((()=>{t=null,i?h():(l=!1,e.$(5))}),150)};return r.q=n,r})(),u=()=>{l&&(c=!0),e.$(4,r()),h()},f=(()=>{let t=s()-50;return(...r)=>{const o=s();t+50<o&&(t=o,(t=>{if(0!==e.T()&&!t.ctrlKey&&(n?t.deltaX:t.deltaY)){const t=e.O();t>0&&t<e.M()&&h()}})(...r))}})(),_=()=>{i=!0,l=c=!1},g=()=>{i=!1,x()&&(l=!0)};return t.addEventListener("scroll",u),t.addEventListener("wheel",f,{passive:!0}),t.addEventListener("touchstart",_,{passive:!0}),t.addEventListener("touchend",g,{passive:!0}),{A:()=>{t.removeEventListener("scroll",u),t.removeEventListener("wheel",f),t.removeEventListener("touchstart",_),t.removeEventListener("touchend",g),h.q()},P:e=>{o(e,c),c=!1}}},H=(e,t,n,r)=>z(e)||r?-n:t.M()-n,J=(e,t)=>{let n,r,o;const i=t?"scrollLeft":"scrollTop",s=t?"overflowX":"overflowY",l=(r,o)=>t&&y()?H(n,e,r,o):r,c=async(r,s)=>{if(!n)return;o&&o();const c=()=>h(r(),0,e.M()),d=()=>{let t;return[new Promise(((e,n)=>{t=e,a(o=n,150)})),e.L(2,(()=>{t&&t()}))]};if(s&&R()){for(;e.$(7,c()),e.R();){const[e,t]=d();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:l(c()),behavior:"smooth"})}else for(;;){const[t,r]=d();try{n[i]=l(c()),e.$(6),await t}catch(e){return}finally{r()}}};return{X(o){n=o,r=E(e,o,t,(()=>l(o[i])),((e,t)=>{if(t){t=!1;const e=o.style,n=e[s];e[s]="hidden",a((()=>{e[s]=n}))}o[i]+=l(e,!0)}))},A(){r&&r.A()},Y(e){c((()=>e))},j(t){t+=e.O(),c((()=>t))},D(t,{align:n,smooth:r}={}){if(t=h(t,0,e.k()-1),"nearest"===n){const r=e.I(t),o=e.O();if(r<o)n="start";else{if(!(r+e.C(t)>o+e._()))return;n="end"}}c((()=>e.H()+("end"===n?e.I(t)+e.C(t)-e._():"center"===n?e.I(t)+(e.C(t)-e._())/2:e.I(t))),r)},P:e=>{n&&r&&r.P(e)}}},W=(e,t)=>{let n,r;const o=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",s=(r,o)=>t&&y()?H(n,e,r,o):r;return{X(l){n=l;const c=(e,n)=>{const r=n+(t&&y()?window.innerWidth-e[i]-e.offsetWidth:e[i]),o=e.offsetParent;return e!==document.body&&o?c(o,r):r};r=E(e,window,t,(()=>s(window[o])-c(l,0)),(e=>{window.scrollBy(t?s(e,!0):0,t?0:e)}))},A(){r&&r.A()},P:e=>{r&&r.P(e)}}},B="current",L=(e,t)=>{if(c(e))for(const n of e)L(n,t);else d(e)&&"boolean"!=typeof e&&t.push(e)},$=(e,t)=>{const n=e.key;return d(n)?n:"_"+t},q=e=>{const n=t.useRef();return n[B]||(n[B]=e())},A=e=>{const n=t.useRef(e);return T((()=>{n[B]=e}),[e]),n},P=(e,t)=>{let n;const r=t?"width":"height",o=new WeakMap,i=u((()=>new ResizeObserver((t=>{const i=[];for(const{target:s,contentRect:l}of t)if(s.offsetParent)if(s===n)e.$(2,l[r]);else{const e=o.get(s);d(e)&&i.push([e,l[r]])}i.length&&e.$(1,i)}))));return{N(e){i().observe(n=e)},U:(e,t)=>{const n=i();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}},A(){i().disconnect()}}},X=(e,t)=>{const n=t?"width":"height",r=t?"innerWidth":"innerHeight",o=new WeakMap,i=u((()=>new ResizeObserver((t=>{const r=[];for(const{target:e,contentRect:i}of t){if(!e.offsetParent)continue;const t=o.get(e);d(t)&&r.push([t,i[n]])}r.length&&e.$(1,r)})))),s=()=>{e.$(2,window[r])};return{N(){window.addEventListener("resize",s),s()},U:(e,t)=>{const n=i();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}},A(){window.removeEventListener("resize",s),i().disconnect()}}},Y=(e,t)=>{let n;const r="height",i="width",s=new WeakMap,l=new Set,c=new Set,a=new Map,h=(e,t)=>`${e}-${t}`,d=u((()=>new ResizeObserver((d=>{const u=new Set,f=new Set;for(const{target:o,contentRect:l}of d)if(o.offsetParent)if(o===n)e.$(2,l[r]),t.$(2,l[i]);else{const e=s.get(o);if(e){const[t,n]=e,o=h(t,n),s=a.get(o),c=[l[r],l[i]];let d,_;s?(s[0]!==c[0]&&(d=!0),s[1]!==c[1]&&(_=!0)):d=_=!0,d&&u.add(t),_&&f.add(n),(d||_)&&a.set(o,c)}}if(u.size){const t=[];u.forEach((e=>{let n=0;c.forEach((t=>{const r=a.get(h(e,t));r&&(n=o(n,r[0]))})),n&&t.push([e,n])})),e.$(1,t)}if(f.size){const e=[];f.forEach((t=>{let n=0;l.forEach((e=>{const r=a.get(h(e,t));r&&(n=o(n,r[1]))})),n&&e.push([t,n])})),t.$(1,e)}}))));return{N(e){d().observe(n=e)},U(e,t,n){const r=d();return s.set(e,[t,n]),l.add(t),c.add(n),r.observe(e),()=>{s.delete(e),r.unobserve(e)}},A(){d().disconnect()}}},j=t.memo((({V:n,F:r,G:o,K:i,Z:s,ee:l,te:c,ne:a})=>{const h=t.useRef(null);T((()=>r(h[B],o)),[o]);const d=t.useMemo((()=>{const e={margin:0,padding:0,position:s&&a?void 0:"absolute",[c?"height":"width"]:"100%",[c?"top":"left"]:0,[c?y()?"right":"left":"top"]:i,visibility:!s||a?"visible":"hidden"};return c&&(e.display="flex"),e}),[i,s,a]);return"string"==typeof l?e.jsx(l,{ref:h,style:d,children:n}):e.jsx(l,{ref:h,style:d,index:o,children:n})})),D=e=>t.useReducer(e.v,void 0,e.v)[1],N=(e,n)=>t.useMemo((()=>{if("function"==typeof e)return[e,n||0];const t=(e=>{const t=[];return L(e,t),t})(e);return[e=>t[e],t.length]}),[e,n]),U=t.forwardRef((({children:r,count:i,overscan:s=4,itemSize:l,shift:c,horizontal:a,reverse:h,cache:d,startMargin:u,endMargin:f,ssrCount:_,as:g="div",item:w="div",scrollRef:v,onScroll:p,onScrollEnd:m,onRangeChange:S},b)=>{const[z,y]=N(r,i),x=t.useRef(null),R=t.useRef(!!_),O=A(p),E=A(m),[H,W,L,X]=q((()=>{const e=!!a,t=M(y,l,_,d,!l,u,f);return[t,P(t,e),J(t,e),e]}));y!==H.k()&&H.$(3,[y,c]);const Y=D(H),[U,V]=H.m(),F=H.T(),G=H.W(),K=H.u(),Q=(e=>o(e.u(),e._()-e.H()-e.J()))(H),Z=h?o(0,Q-K):0,ee=[];T((()=>{R[B]=!1;const e=H.L(3,(e=>{e?n.flushSync(Y):Y()})),t=H.L(4,(()=>{O[B]&&O[B](H.O())})),r=H.L(8,(()=>{E[B]&&E[B]()})),o=e=>{W.N(e),L.X(e)};return v?Promise.resolve().then((()=>o(v[B]))):o(x[B].parentElement),()=>{e(),t(),r(),W.A(),L.A()}}),[]),T((()=>{const e=H.B();e&&L.P(e)}),[G]),t.useEffect((()=>{S&&S(U,V)}),[U,V]),t.useImperativeHandle(b,(()=>({get cache(){return H.p()},get scrollOffset(){return H.O()},get scrollSize(){return I(H)},get viewportSize(){return H._()},scrollToIndex:L.D,scrollTo:L.Y,scrollBy:L.j})),[]);for(let t=C(U,s,F),n=k(V,s,F,y);t<=n;t++){const n=z(t);ee.push(e.jsx(j,{F:W.U,G:t,K:H.I(t)+Z,Z:H.S(t),ee:w,V:n,te:X,ne:R[B]},$(n,t)))}return e.jsx(g,{ref:x,style:{contain:"content",overflowAnchor:"none",position:"relative",visibility:"hidden",width:X?K:"100%",height:X?"100%":K,[X?"minWidth":"minHeight"]:Q,pointerEvents:0!==F?"none":"auto"},children:ee})})),V=t.forwardRef((({children:t,count:n,overscan:r,itemSize:o,shift:i,horizontal:s,reverse:l,cache:c,ssrCount:a,item:h,onScroll:d,onScrollEnd:u,onRangeChange:f,style:_,...g},w)=>e.jsx("div",{...g,style:{display:s?"inline-block":"block",[s?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",..._},children:e.jsx(U,{ref:w,count:n,overscan:r,itemSize:o,shift:i,horizontal:s,reverse:l,cache:c,ssrCount:a,item:h,onScroll:d,onScrollEnd:u,onRangeChange:f,children:t})}))),F=t.forwardRef((({children:r,count:o,overscan:i=4,itemSize:s,shift:l,horizontal:c,cache:a,ssrCount:h,as:d="div",item:u="div",onScrollEnd:f,onRangeChange:_},g)=>{const[w,v]=N(r,o),p=t.useRef(null),m=A(f),S=t.useRef(!!h),[b,z,y,x]=q((()=>{const e=!!c,t=M(v,s,h,a,!s);return[t,X(t,e),W(t,e),e]}));v!==b.k()&&b.$(3,[v,l]);const R=D(b),[I,O]=b.m(),E=b.T(),H=b.W(),J=b.u(),L=[];T((()=>{S[B]=!1;const e=b.L(3,(e=>{e?n.flushSync(R):R()})),t=b.L(8,(()=>{m[B]&&m[B]()}));return z.N(),y.X(p[B]),()=>{e(),t(),z.A(),y.A()}}),[]),T((()=>{const e=b.B();e&&y.P(e)}),[H]),t.useEffect((()=>{_&&_(I,O)}),[I,O]),t.useImperativeHandle(g,(()=>({get cache(){return b.p()}})),[]);for(let t=C(I,i,E),n=k(O,i,E,v);t<=n;t++){const n=w(t);L.push(e.jsx(j,{F:z.U,G:t,K:b.I(t),Z:b.S(t),ee:u,V:n,te:x,ne:S[B]},$(n,t)))}return e.jsx(d,{ref:p,style:{contain:"content",position:"relative",visibility:"hidden",width:x?J:"100%",height:x?"100%":J,pointerEvents:0!==E?"none":"auto"},children:L})})),G=t.forwardRef((({children:n,attrs:r,width:o,height:i,scrolling:s},l)=>e.jsx("div",{ref:l,...r,children:e.jsx("div",{style:t.useMemo((()=>({contain:"content",position:"relative",visibility:"hidden",width:null!=o?o:"100%",height:null!=i?i:"100%",pointerEvents:s?"none":"auto"})),[o,i,s]),children:n})}))),K=(e,t)=>`${e}-${t}`,Q=t.memo((({V:n,F:r,re:o,oe:i,ie:s,se:l,le:c,ce:a,Z:h,ee:d})=>{const u=t.useRef(null);return T((()=>r.U(u[B],o,i)),[i,o]),e.jsx(d,{ref:u,style:t.useMemo((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:s,[y()?"right":"left"]:l,visibility:h?"hidden":"visible",minHeight:c,minWidth:a})),[s,l,a,c,h]),children:n})})),Z=t.forwardRef((({children:r,row:o,col:i,cellHeight:s=40,cellWidth:c=100,overscan:a=2,initialRowCount:h,initialColCount:d,components:{Root:u=G,Cell:f="div"}={},..._},g)=>{const[w,v,p,m,S]=q((()=>{const e=M(o,s,h),t=M(i,c,d);return[e,t,Y(e,t),J(e,!1),J(t,!0)]}));o!==w.k()&&w.$(3,[o]),i!==v.k()&&v.$(3,[i]);const b=D(w),z=D(v),[y,x]=w.m(),[R,O]=v.m(),E=w.T(),H=v.T(),W=w.W(),L=v.W(),$=I(w),A=I(v),P=t.useRef(null);T((()=>{const e=P[B],t=w.L(3,(e=>{e?n.flushSync(b):b()})),r=v.L(3,(e=>{e?n.flushSync(z):z()}));return p.N(e),m.X(e),S.X(e),()=>{t(),r(),p.A(),m.A(),S.A()}}),[]),T((()=>{const e=w.B();e&&m.P(e)}),[W]),T((()=>{const e=v.B();e&&S.P(e)}),[L]),t.useImperativeHandle(g,(()=>({get scrollOffset(){return[v.O(),w.O()]},get scrollSize(){return[I(v),I(w)]},get viewportSize(){return[v._(),w._()]},scrollToIndex(e,t){S.D(e),m.D(t)},scrollTo(e,t){S.Y(e),m.Y(t)},scrollBy(e,t){S.j(e),m.j(t)}})),[]);const X=t.useMemo((()=>{const e=new Map;return(t,n)=>{let o=e.get(K(t,n));return o||e.set(K(t,n),o=r({rowIndex:t,colIndex:n})),o}}),[r]),j=C(y,a,E),N=k(x,a,E,o),U=C(R,a,H),V=k(O,a,H,i),F=[];for(let t=j;t<=N;t++)for(let n=U;n<=V;n++)F.push(e.jsx(Q,{F:p,re:t,oe:n,ie:w.I(t),se:v.I(n),le:w.C(t),ce:v.C(n),Z:w.S(t)||v.S(n),ee:f,V:X(t,n)},K(t,n)));return e.jsx(u,{ref:P,width:A,height:$,scrolling:0!==E||0!==H,attrs:t.useMemo((()=>({..._,style:{overflow:"auto",overflowAnchor:"none",contain:"strict",width:"100%",height:"100%",..._.style}})),l(_)),children:F})}));exports.VList=V,exports.Virtualizer=U,exports.WindowVirtualizer=F,exports.experimental_VGrid=Z;
//# sourceMappingURL=index.js.map
