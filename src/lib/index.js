"use client";
var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");const o=Math.min,r=Math.max,i=Math.abs,s=Array.isArray,l=setTimeout,c=(e,t,n)=>o(n,r(t,e)),u=e=>null!=e,a="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},f=e=>{let t,n;return(...o)=>(t||(t=!0,n=e(...o)),n)},d=-1,h=(e,t,n)=>{const o=n?"unshift":"push";for(let n=0;n<t;n++)e[o](d);return e},_=(e,t)=>{const n=e.t[t];return n===d?e.o:n},g=(e,t,n)=>{const r=e.t[t]===d;return e.t[t]=n,e.i=o(t,e.i),r},v=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,o=e.u[n];for(;n<t;)o+=_(e,n),e.u[++n]=o;return e.i=t,o},p=(e,t,n)=>{let o=v(e,n);for(;n>=0&&n<e.l;)if(o<=t){const r=_(e,n);if(o+r>t)break;o+=r,n++}else o-=_(e,--n);return c(n,0,e.l-1)},m=(e,t,n,r)=>{const i=p(e,t,o(n,e.l-1));return[i,p(e,t+r,i)]},w=(e,t,n)=>{const r=t-e.l,i=r>0;let s;return i?(s=e.o*r,h(e.t,r,n),h(e.u,r)):(s=(n?e.t.splice(0,-r):e.t.splice(r)).reduce(((t,n)=>t+(n===d?e.o:n)),0),e.u.splice(r)),e.i=n?-1:o(t-1,e.i),e.l=t,[s,i]},S="undefined"!=typeof window,y=()=>document.documentElement,b=e=>e.ownerDocument,x=e=>e.defaultView,z=/*#__PURE__*/f((()=>!!S&&"rtl"===getComputedStyle(y()).direction)),I=/*#__PURE__*/f((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),R=/*#__PURE__*/f((()=>"scrollBehavior"in y().style)),k=e=>r(e.h(),e._()),C=(e,t,n)=>r(e-(1===n?1:r(1,t)),0),M=(e,t,n,i)=>o(e+(2===n?1:r(1,t)),i-1),T=(e,t,n)=>t.reduce(((t,[o,r])=>{const i=r-_(e,o);return(!n||i>0)&&(t+=i),t}),0),E=(e,t=40,n=0,s,l=!1,u=0,a=0)=>{let f=!!n,p=[],S=0,y=0,b=0,x=0,z=0,R=!1,k=0,C=0,M=0,E=f?[0,r(n-1,0)]:null,H=[0,0];const J=s||((e,t)=>({o:t,l:e,i:-1,t:h([],e),u:h([],e)}))(e,t),O=new Set,W=new Set,q=()=>(e=>e.l?v(e,e.l-1)+_(e,e.l-1):0)(J),B=()=>q()+u+a,$=()=>r(0,B()-S),A=e=>{I()&&0!==C?z+=e:(x+=e,b++)};return{v:()=>p,p:()=>JSON.parse(JSON.stringify(J)),m:()=>E?[o(H[0],E[0]),r(H[1],E[1])]:k?H:H=m(J,y-u+z+x,H[0],S),S:e=>J.t[e]===d,I:()=>!!E&&J.t.slice(r(0,E[0]-1),o(J.l-1,E[1]+1)+1).includes(d),R:e=>v(J,e)-z,k:e=>_(J,e),C:()=>J.l,M:()=>y,T:()=>C,_:()=>S,H:()=>u,h:q,J:()=>b,O(){const e=x,t=R;return x=0,R=!1,S>B()?[0,!1]:[k=e,t]},W(e,t){const n=[e,t];return O.add(n),()=>{O.delete(n)}},q(e,t){let n,s,u=0;switch(e){case 1:{const e=t.filter((([e,t])=>J.t[e]!==t));if(!e.length)break;let n=0;if(0===y);else if(y>$()-1.5)n=T(J,e,!0);else if(2===M)n=T(J,e);else{const[t]=H;n=T(J,e.filter((([e])=>e<t)))}n&&A(n);for(const[t,n]of e)g(J,t,n)&&l&&W.add(t);if(l&&S){const e=[...W];e.reduce(((e,t)=>e+_(J,t)),0)>S&&(A(((e,t,n)=>{const o=t.map((t=>_(e,t))),i=o[0],s=e.o;return e.i=-1,((e.o=o.every((e=>e===i))?i:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(o))-s)*r(n-t.filter((e=>e<n)).length,0)})(J,e,H[0])),l=!1,W.clear())}u=2,s=!0;break}case 2:S!==t&&(S=t,u=2);break;case 3:if(t[1]){const e=$()-y,[n,r]=w(J,t[0],!0);A(r?n:-o(n,e)),r&&(M=2,R=!0),u=1}else w(J,t[0]);break;case 4:{const e=c(t,0,$()),n=k;if(k=0,e===y)break;const o=e-y,r=i(o);n&&r<i(n)+1||0!==M||(C=o<0?2:1),f&&(E=null,f=!1),s=r>S,y=e,u=5;break}case 5:u=8,0!==C&&(n=!0,u+=1),C=0,M=0,E=null;break;case 6:M=1;break;case 7:E=m(J,t,H[0],S),u=1}u&&(p=[],n&&z&&(x+=z,z=0,b++),O.forEach((([e,t])=>{u&e&&t(s)})))}}},H=S?t.useLayoutEffect:t.useEffect,J=(e,t)=>t&&z()?-e:e,O=(e,t,n,o,r)=>{const i=Date.now;let s=0,c=!1,a=!1,f=!1,d=!1;const h=(()=>{let t;const n=()=>{u(t)&&clearTimeout(t)},o=()=>{n(),t=l((()=>{t=null,(()=>{if(c||a)return c=!1,void h();f=!1,e.q(5)})()}),150)};return o.B=n,o})(),_=()=>{s=i(),f&&(d=!0),e.q(4,o()),h()},g=t=>{if(c||0===e.T()||t.ctrlKey)return;const o=i()-s;150>o&&50<o&&(n?t.deltaX:t.deltaY)&&(c=!0)},v=()=>{a=!0,f=d=!1},p=()=>{a=!1,I()&&(f=!0)};return t.addEventListener("scroll",_),t.addEventListener("wheel",g,{passive:!0}),t.addEventListener("touchstart",v,{passive:!0}),t.addEventListener("touchend",p,{passive:!0}),{$:()=>{t.removeEventListener("scroll",_),t.removeEventListener("wheel",g),t.removeEventListener("touchstart",v),t.removeEventListener("touchend",p),h.B()},A:()=>{const[t,n]=e.O();if(t)return r(t,d),d=!1,n}}},W=(e,t)=>{let n,o,r;const i=t?"scrollLeft":"scrollTop",s=t?"overflowX":"overflowY",u=async(o,s)=>{if(!n)return void a((()=>u(o,s)));r&&r();const c=()=>{let t;return[new Promise(((e,n)=>{t=e,l(r=n,150)})),e.W(2,(()=>{t&&t()}))]};if(s&&R()){for(;e.q(7,o()),e.I();){const[e,t]=c();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:J(o(),t),behavior:"smooth"})}else for(;;){const[r,s]=c();try{n[i]=J(o(),t),e.q(6),await r}catch(e){return}finally{s()}}};return{D(r){n=r,o=O(e,r,t,(()=>J(r[i],t)),((e,n)=>{if(n){const e=r.style,t=e[s];e[s]="hidden",l((()=>{e[s]=t}))}r[i]+=J(e,t)}))},$(){o&&o.$()},L(e){u((()=>e))},P(t){t+=e.M(),u((()=>t))},X(t,{align:n,smooth:o}={}){if(t=c(t,0,e.C()-1),"nearest"===n){const o=e.R(t),r=e.M();if(o<r)n="start";else{if(!(o+e.k(t)>r+e._()))return;n="end"}}u((()=>e.H()+("end"===n?e.R(t)+e.k(t)-e._():"center"===n?e.R(t)+(e.k(t)-e._())/2:e.R(t))),o)},A:()=>{o&&o.A()&&r&&r()}}},q=(e,t)=>{let n;return{D(o){const r=t?"scrollX":"scrollY",i=b(o),s=x(i),l=i.body,c=(e,t,n,o=0)=>{const r=n?"offsetLeft":"offsetTop",i=o+(n&&z()?s.innerWidth-e[r]-e.offsetWidth:e[r]),l=e.offsetParent;return e!==t&&l?c(l,t,n,i):i};n=O(e,s,t,(()=>J(s[r],t)-c(o,l,t)),(e=>{s.scrollBy(t?J(e,t):0,t?0:e)}))},$(){n&&n.$()},A:()=>{n&&n.A()}}},B="current",$=(e,t)=>{if(s(e))for(const n of e)$(n,t);else u(e)&&"boolean"!=typeof e&&t.push(e)},A=(e,t)=>{const n=e.key;return u(n)?n:"_"+t},D=e=>{const n=t.useRef();return n[B]||(n[B]=e())},L=e=>{const n=t.useRef(e);return H((()=>{n[B]=e}),[e]),n},P=e=>{let t;return{D(n){(t||(t=new(x(b(n)).ResizeObserver)(e))).observe(n)},Y(e){t.unobserve(e)},$(){t&&t.disconnect()}}},X=(e,t)=>{let n;const o=t?"width":"height",r=new WeakMap,i=P((t=>{const i=[];for(const{target:s,contentRect:l}of t)if(s.offsetParent)if(s===n)e.q(2,l[o]);else{const e=r.get(s);u(e)&&i.push([e,l[o]])}i.length&&e.q(1,i)}));return{j(e){i.D(n=e)},N:(e,t)=>(r.set(e,t),i.D(e),()=>{r.delete(e),i.Y(e)}),$:i.$}},Y=(e,t)=>{const n=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,i=P((t=>{const o=[];for(const{target:e,contentRect:i}of t){if(!e.offsetParent)continue;const t=r.get(e);u(t)&&o.push([t,i[n]])}o.length&&e.q(1,o)}));let s;return{j(t){const n=x(b(t)),r=()=>{e.q(2,n[o])};n.addEventListener("resize",r),r(),s=()=>{n.removeEventListener("resize",r)}},N:(e,t)=>(r.set(e,t),i.D(e),()=>{r.delete(e),i.Y(e)}),$(){s&&s(),i.$()}}},j=(e,t)=>{let n;const o="height",i="width",s=new WeakMap,l=new Set,c=new Set,u=new Map,a=(e,t)=>`${e}-${t}`,f=P((f=>{const d=new Set,h=new Set;for(const{target:r,contentRect:l}of f)if(r.offsetParent)if(r===n)e.q(2,l[o]),t.q(2,l[i]);else{const e=s.get(r);if(e){const[t,n]=e,r=a(t,n),s=u.get(r),c=[l[o],l[i]];let f,_;s?(s[0]!==c[0]&&(f=!0),s[1]!==c[1]&&(_=!0)):f=_=!0,f&&d.add(t),_&&h.add(n),(f||_)&&u.set(r,c)}}if(d.size){const t=[];d.forEach((e=>{let n=0;c.forEach((t=>{const o=u.get(a(e,t));o&&(n=r(n,o[0]))})),n&&t.push([e,n])})),e.q(1,t)}if(h.size){const e=[];h.forEach((t=>{let n=0;l.forEach((e=>{const o=u.get(a(e,t));o&&(n=r(n,o[1]))})),n&&e.push([t,n])})),t.q(1,e)}}));return{j(e){f.D(n=e)},N:(e,t,n)=>(s.set(e,[t,n]),l.add(t),c.add(n),f.D(e),()=>{s.delete(e),f.Y(e)}),$:f.$}},N=t.memo((({U:n,V:o,F:r,G:i,K:s,Z:l,ee:c,te:u})=>{const a=t.useRef(null);H((()=>o(a[B],r)),[r]);const f=t.useMemo((()=>{const e={margin:0,padding:0,position:s&&u?void 0:"absolute",[c?"height":"width"]:"100%",[c?"top":"left"]:0,[c?z()?"right":"left":"top"]:i,visibility:!s||u?"visible":"hidden"};return c&&(e.display="flex"),e}),[i,s,u]);return"string"==typeof l?e.jsx(l,{ref:a,style:f,children:n}):e.jsx(l,{ref:a,style:f,index:r,children:n})})),U=e=>t.useReducer(e.v,void 0,e.v)[1],V=(e,n)=>t.useMemo((()=>{if("function"==typeof e)return[e,n||0];const t=(e=>{const t=[];return $(e,t),t})(e);return[e=>t[e],t.length]}),[e,n]),F=t.forwardRef((({children:o,count:r,overscan:i=4,itemSize:s,shift:l,horizontal:c,cache:u,startMargin:f,endMargin:d,ssrCount:h,as:_="div",item:g="div",scrollRef:v,onScroll:p,onScrollEnd:m,onRangeChange:w},S)=>{const[y,b]=V(o,r),x=t.useRef(null),z=t.useRef(!!h),I=L(p),R=L(m),[T,J,O,q]=D((()=>{const e=!!c,t=E(b,s,h,u,!s,f,d);return[t,X(t,e),W(t,e),e]}));b!==T.C()&&T.q(3,[b,l]);const $=U(T),[P,Y]=T.m(),j=T.T(),F=T.J(),G=T.h(),K=[];H((()=>{z[B]=!1;const e=T.W(3,(e=>{e?n.flushSync($):$()})),t=T.W(4,(()=>{I[B]&&I[B](T.M())})),o=T.W(8,(()=>{R[B]&&R[B]()})),r=e=>{J.j(e),O.D(e)};return v?a((()=>r(v[B]))):r(x[B].parentElement),()=>{e(),t(),o(),J.$(),O.$()}}),[]),H((()=>{O.A()}),[F]),t.useEffect((()=>{w&&w(P,Y)}),[P,Y]),t.useImperativeHandle(S,(()=>({get cache(){return T.p()},get scrollOffset(){return T.M()},get scrollSize(){return k(T)},get viewportSize(){return T._()},scrollToIndex:O.X,scrollTo:O.L,scrollBy:O.P})),[]);for(let t=C(P,i,j),n=M(Y,i,j,b);t<=n;t++){const n=y(t);K.push(e.jsx(N,{V:J.N,F:t,G:T.R(t),K:T.S(t),Z:g,U:n,ee:q,te:z[B]},A(n,t)))}return e.jsx(_,{ref:x,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:q?G:"100%",height:q?"100%":G,pointerEvents:0!==j?"none":"auto"},children:K})})),G=t.forwardRef((({children:n,count:o,overscan:r,itemSize:i,shift:s,horizontal:l,reverse:c,cache:u,ssrCount:a,item:f,onScroll:d,onScrollEnd:h,onRangeChange:_,style:g,...v},p)=>{const m=t.useRef(null),w=c&&!l;let S=e.jsx(F,{ref:p,scrollRef:w?m:void 0,count:o,overscan:r,itemSize:i,shift:s,horizontal:l,cache:u,ssrCount:a,item:f,onScroll:d,onScrollEnd:h,onRangeChange:_,children:n});return w&&(S=e.jsx("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:S})),e.jsx("div",{ref:m,...v,style:{display:l?"inline-block":"block",[l?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...g},children:S})})),K=t.forwardRef((({children:o,count:r,overscan:i=4,itemSize:s,shift:l,horizontal:c,cache:u,ssrCount:a,as:f="div",item:d="div",onScrollEnd:h,onRangeChange:_},g)=>{const[v,p]=V(o,r),m=t.useRef(null),w=L(h),S=t.useRef(!!a),[y,b,x,z]=D((()=>{const e=!!c,t=E(p,s,a,u,!s);return[t,Y(t,e),q(t,e),e]}));p!==y.C()&&y.q(3,[p,l]);const I=U(y),[R,k]=y.m(),T=y.T(),J=y.J(),O=y.h(),W=[];H((()=>{S[B]=!1;const e=y.W(3,(e=>{e?n.flushSync(I):I()})),t=y.W(8,(()=>{w[B]&&w[B]()})),o=m[B];return b.j(o),x.D(o),()=>{e(),t(),b.$(),x.$()}}),[]),H((()=>{x.A()}),[J]),t.useEffect((()=>{_&&_(R,k)}),[R,k]),t.useImperativeHandle(g,(()=>({get cache(){return y.p()}})),[]);for(let t=C(R,i,T),n=M(k,i,T,p);t<=n;t++){const n=v(t);W.push(e.jsx(N,{V:b.N,F:t,G:y.R(t),K:y.S(t),Z:d,U:n,ee:z,te:S[B]},A(n,t)))}return e.jsx(f,{ref:m,style:{flex:"none",position:"relative",visibility:"hidden",width:z?O:"100%",height:z?"100%":O,pointerEvents:0!==T?"none":"auto"},children:W})})),Q=(e,t)=>`${e}-${t}`,Z=t.memo((({U:n,V:o,ne:r,oe:i,re:s,ie:l,se:c,le:u,K:a,Z:f})=>{const d=t.useRef(null);return H((()=>o.N(d[B],r,i)),[i,r]),e.jsx(f,{ref:d,style:t.useMemo((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:s,[z()?"right":"left"]:l,visibility:a?"hidden":"visible",minHeight:c,minWidth:u})),[s,l,u,c,a]),children:n})})),ee=t.forwardRef((({children:o,row:r,col:i,cellHeight:s=40,cellWidth:l=100,overscan:c=2,initialRowCount:u,initialColCount:a,item:f="div",style:d,...h},_)=>{const[g,v,p,m,w]=D((()=>{const e=E(r,s,u),t=E(i,l,a);return[e,t,j(e,t),W(e,!1),W(t,!0)]}));r!==g.C()&&g.q(3,[r]),i!==v.C()&&v.q(3,[i]);const S=U(g),y=U(v),[b,x]=g.m(),[z,I]=v.m(),R=g.T(),T=v.T(),J=g.J(),O=v.J(),q=k(g),$=k(v),A=t.useRef(null);H((()=>{const e=A[B],t=g.W(3,(e=>{e?n.flushSync(S):S()})),o=v.W(3,(e=>{e?n.flushSync(y):y()}));return p.j(e),m.D(e),w.D(e),()=>{t(),o(),p.$(),m.$(),w.$()}}),[]),H((()=>{m.A()}),[J]),H((()=>{w.A()}),[O]),t.useImperativeHandle(_,(()=>({get scrollOffset(){return[v.M(),g.M()]},get scrollSize(){return[k(v),k(g)]},get viewportSize(){return[v._(),g._()]},scrollToIndex(e,t){w.X(e),m.X(t)},scrollTo(e,t){w.L(e),m.L(t)},scrollBy(e,t){w.P(e),m.P(t)}})),[]);const L=t.useMemo((()=>{const e=new Map;return(t,n)=>{let r=e.get(Q(t,n));return r||e.set(Q(t,n),r=o({rowIndex:t,colIndex:n})),r}}),[o]),P=C(b,c,R),X=M(x,c,R,r),Y=C(z,c,T),N=M(I,c,T,i),V=[];for(let t=P;t<=X;t++)for(let n=Y;n<=N;n++)V.push(e.jsx(Z,{V:p,ne:t,oe:n,re:g.R(t),ie:v.R(n),se:g.k(t),le:v.k(n),K:g.S(t)||v.S(n),Z:f,U:L(t,n)},Q(t,n)));return e.jsx("div",{ref:A,...h,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...d},children:e.jsx("div",{style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:$,height:q,pointerEvents:0!==R||0!==T?"none":"auto"},children:V})})}));exports.VList=G,exports.Virtualizer=F,exports.WindowVirtualizer=K,exports.experimental_VGrid=ee;
//# sourceMappingURL=index.js.map
