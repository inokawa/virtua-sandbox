"use client";
var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");const r=Math.min,o=Math.max,i=Math.abs,s=Date.now,l=Object.values,c=Array.isArray,u=setTimeout,d=(e,t,n)=>r(n,o(t,e)),a=e=>null!=e,h=(e,t)=>{let n;const r=()=>{a(n)&&clearTimeout(n)},o=()=>{r(),n=u((()=>{n=null,e()}),t)};return o.t=r,o},f=e=>{let t,n;return(...r)=>(t||(t=!0,n=e(...r)),n)},_=e=>getComputedStyle(e),w=e=>e?parseFloat(e):0,g=-1,p=(e,t)=>{const n=e.o[t];return n===g?e.i:n},m=(e,t)=>{if(!e.l)return 0;if(e.u>=t)return e.h[t];let n=e.u,r=e.h[n];for(;n<t;)r+=p(e,n),e.h[++n]=r;return e.u=t,r},v=(e,t,n)=>{let r=m(e,n);for(;n>=0&&n<e.l;)if(r<=t){const o=p(e,n);if(r+o>t)break;r+=o,n++}else r-=p(e,--n);return d(n,0,e.l-1)},b=(e,t,n,o)=>{const i=v(e,t,r(n,e.l-1));return[i,v(e,t+o,i)]},S=(e,t,n)=>{const r=n?"unshift":"push";for(let n=e.l;n<t;n++)e.o[r](g),e.h.push(0===n?0:g);e.l=t},I=(e,t,n)=>{const r=t-e.l,o=r<0;let i;return o?(i=(n?e.o.splice(0,-r):e.o.splice(r)).reduce(((t,n)=>t+(n===g?e.i:n)),0),e.h.splice(r)):(i=e.i*r,S(e,e.l+r,n)),e.u=n?0:d(t-1,0,e.u),e.l=t,[i,o]},z="undefined"!=typeof window,x=/*#__PURE__*/f((e=>{const t="scrollLeft",n=e[t];e[t]=1;const r=e[t]<1;return e[t]=n,r})),y=/*#__PURE__*/f((()=>!!z&&"rtl"===_(document.body).direction)),R=/*#__PURE__*/f((()=>!!z&&/iP(hone|od|ad)/.test(navigator.userAgent))),k=(e,t,n)=>t.reduce(((t,[r,o])=>{const i=o-p(e,r);return(!n||i>0)&&(t+=i),t}),0),O=(e,t=40,n=0,s=((e,t)=>{const n={i:t,l:0,u:0,o:[],h:[]};return S(n,e),n})(e,t),l,c)=>{let u=t*o(n-1,0),a=0,h=0,f=0,_=0,w=0,v=!1,z=!1,x=!1,y=[0,n];const O=R(),C=new Set,T=()=>(e=>e.l?m(e,e.l-1)+p(e,e.l-1):0)(s),M=()=>T()-u,H=e=>d(e,0,M()),J=e=>{O&&0!==w?_+=e:(f+=e,h++)},W=e=>{const t=w;return w=e,w!==t};return{_:()=>JSON.parse(JSON.stringify(s)),g:()=>y=b(s,a+_,y[0],u),p:e=>s.o[e]===g,m(e){const[t,n]=b(s,e,y[0],u);return((e,t,n)=>e.o.slice(o(0,t-1),r(e.l-1,n+1)+1).includes(g))(s,t,n)},v(e){const t=m(s,e)-_;return l?t+o(0,u-T()):t},S:e=>p(s,e),I:()=>s.l,R:()=>a,k:M,O:()=>w,C:()=>u,T:()=>o(T(),u),M:()=>h,H(){const e=f;return f=0,e},J(e,t){const n=[e,t];return C.add(n),()=>{C.delete(n)}},W(e,t){let n,o,l=0;switch(e){case 1:{const e=t.filter((([e,t])=>s.o[e]!==t));if(!e.length)break;if(!v){let t=0;if(0===a);else if(a>M()-1.5)t=k(s,e,!0);else{const[n]=y;t=k(s,e.filter((([e])=>e<n)))}t&&J(t)}let n=!1;e.forEach((([e,t])=>{((e,t,n)=>{const o=e.o[t]===g;return e.o[t]=n,e.u=r(t,e.u),o})(s,e,t)&&(n=!0)})),c&&n&&!a&&(e=>{const t=e.o.filter((e=>e!==g)),n=t[0];e.i=t.every((e=>e===n))?n:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(t)})(s),l+=2,x=o=!0;break}case 2:u!==t&&(u=t,l=2);break;case 3:if(t[1]){const e=M()-a,[n,o]=I(s,t[0],!0),i=o?-r(n,e):n;J(i),O||(a=H(a+i)),l=1}else I(s,t[0]);break;case 4:case 5:if(a===t)break;if(4===e){const e=t-a,n=x;x=!1,0!==w&&n||z||W(e<0?2:1),o=i(e)>u,l+=4}else v=!0;a=H(t),l+=1;break;case 6:W(0)&&(n=!0,l=1),z=v=!1;break;case 7:v=!1,z=!0}l&&(n&&_&&(x=!0,f+=_,_=0,h++),C.forEach((([e,t])=>{l&e&&t(o)})))}}},C=z?t.useLayoutEffect:t.useEffect,T=(e,t,n)=>(()=>{let r=s()-50;return(...o)=>{const i=s();r+50<i&&(r=i,(r=>{if(0!==e.O()&&!r.ctrlKey&&(t?r.deltaX:r.deltaY)){const t=e.R();t>0&&t<e.k()&&n()}})(...o))}})(),M=(e,t,n,r)=>x(e)||r?-n:t.k()-n,H=(e,t)=>{let n,r,o=!1;const i=t?"scrollLeft":"scrollTop",s=(r,o)=>t&&y()?M(n,e,r,o):r,l=async t=>{if(!n)return;const o=()=>d(t(),0,e.k());for(;;){const t=o();if(e.W(5,t),!e.m(t))break;r&&r[1]();const n=e.J(2,(()=>{r&&r[0]()}));try{await new Promise(((e,t)=>{let n=!1;const o=()=>{n||(n=!0,e(),r=void 0)};r=[o,t],u(o,250)}))}catch(e){return}finally{n()}}n[i]=s(o()),e.W(7)};return{L(r){n=r;let l=!1,c=!1;const u=()=>{e.W(4,s(r[i]))},d=h((()=>{l?d():(c=!1,u(),e.W(6))}),150),a=()=>{c&&(o=!0),u(),d()},f=T(e,t,d),_=()=>{l=!0,c=o=!1},w=()=>{l=!1,R()&&(c=!0)};return r.addEventListener("scroll",a),r.addEventListener("wheel",f,{passive:!0}),r.addEventListener("touchstart",_,{passive:!0}),r.addEventListener("touchend",w,{passive:!0}),()=>{r.removeEventListener("scroll",a),r.removeEventListener("wheel",f),r.removeEventListener("touchstart",_),r.removeEventListener("touchend",w),d.t()}},$(e){l((()=>e))},q(t){t+=e.R(),l((()=>t))},B(t,n){t=d(t,0,e.I()-1),l("end"===n?()=>e.v(t)+e.S(t)-e.C():()=>e.v(t))},j:e=>{if(n){if(o){const e=n.style.overflow;n.style.overflow="hidden",o=!1,u((()=>{n.style.overflow=e}))}n[i]+=s(e,!0)}}}},J=(e,t)=>{let n;const r=t?"scrollX":"scrollY",o=t?"offsetLeft":"offsetTop",i=(r,o)=>t&&y()?M(n,e,r,o):r;return{L(s){n=s;let l=!1;const c=(e,n)=>{const r=n+(t&&y()?window.innerWidth-e[o]-e.offsetWidth:e[o]),i=e.offsetParent;return e!==document.body&&i?c(i,r):r},u=()=>{l&&e.W(4,i(window[r])-c(s,0))},d=h((()=>{u(),e.W(6)}),150),a=()=>{u(),d()},f=T(e,t,d),_=new IntersectionObserver((([e])=>{l=e.isIntersecting}));return _.observe(s),window.addEventListener("scroll",a),window.addEventListener("wheel",f,{passive:!0}),()=>{_.disconnect(),window.removeEventListener("scroll",a),window.removeEventListener("wheel",f),d.t()}},j:e=>{window.scrollBy(t?i(e,!0):0,t?0:e)}}},W="current",L={},$=(e,t)=>{if(c(e))for(const n of e)$(n,t);else a(e)&&"boolean"!=typeof e&&t.push(e)},q=e=>{const t=[];return $(e,t),t},B=(e,t,n)=>o(e-(1===n?1:o(1,t)),0),j=(e,t,n,i)=>r(e+(2===n?1:o(1,t)),i-1),D=e=>{const n=t.useRef();return n[W]||(n[W]=e())},N=e=>{const n=t.useRef(e);return C((()=>{n[W]=e}),[e]),n},P={box:"border-box"},U=(e,t)=>{let n;const r=t?"width":"height",o=new WeakMap,i=f((()=>new ResizeObserver((i=>{const s=[];for(const{target:l,contentRect:c}of i)if(l.offsetParent)if(l===n)e.W(2,c[r]+c[t?"left":"top"]+w(_(n)[t?"paddingRight":"paddingBottom"]));else{const e=o.get(l);a(e)&&s.push([e,c[r]])}s.length&&e.W(1,s)}))));return{D(e){n=e;const t=i();return t.observe(e,P),()=>{t.disconnect()}},N(e,t){const n=i();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}}}},V=(e,t)=>{const n=t?"width":"height",r=t?"innerWidth":"innerHeight",o=new WeakMap,i=f((()=>new ResizeObserver((t=>{const r=[];for(const{target:e,contentRect:i}of t){if(!e.offsetParent)continue;const t=o.get(e);a(t)&&r.push([t,i[n]])}r.length&&e.W(1,r)}))));return{D(){const t=()=>{e.W(2,window[r])};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t),i().disconnect()}},N(e,t){const n=i();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}}}},A=(e,t)=>{let n;const r="height",i="width",s=new WeakMap,l=new Set,c=new Set,u=new Map,d=(e,t)=>`${e}-${t}`,a=f((()=>new ResizeObserver((a=>{const h=new Set,f=new Set;for(const{target:o,contentRect:l}of a)if(o.offsetParent)if(o===n){const o=_(n);e.W(2,l[r]+l.top+w(o.paddingBottom)),t.W(2,l[i]+l.left+w(o.paddingRight))}else{const e=s.get(o);if(e){const[t,n]=e,o=d(t,n),s=u.get(o),c=[l[r],l[i]];let a,_;s?(s[0]!==c[0]&&(a=!0),s[1]!==c[1]&&(_=!0)):a=_=!0,a&&h.add(t),_&&f.add(n),(a||_)&&u.set(o,c)}}if(h.size){const t=[];h.forEach((e=>{let n=0;c.forEach((t=>{const r=u.get(d(e,t));r&&(n=o(n,r[0]))})),n&&t.push([e,n])})),e.W(1,t)}if(f.size){const e=[];f.forEach((t=>{let n=0;l.forEach((e=>{const r=u.get(d(e,t));r&&(n=o(n,r[1]))})),n&&e.push([t,n])})),t.W(1,e)}}))));return{D(e){n=e;const t=a();return t.observe(e,P),()=>{t.disconnect()}},N(e,t,n){const r=a();return s.set(e,[t,n]),l.add(t),c.add(n),r.observe(e),()=>{s.delete(e),r.unobserve(e)}}}},E=t.forwardRef((({children:n,attrs:r,width:o,height:i,scrolling:s},l)=>e.jsx("div",{ref:l,...r,children:e.jsx("div",{style:t.useMemo((()=>({position:"relative",visibility:"hidden",width:null!=o?o:"100%",height:null!=i?i:"100%",pointerEvents:s?"none":"auto"})),[o,i,s]),children:n})}))),F=t.memo((({P:n,U:r,V:o,A:i,F:s,X:l,Y:c})=>{const u=t.useRef(null);return C((()=>r.N(u[W],o)),[o]),e.jsx(l,{ref:u,style:t.useMemo((()=>{const e={margin:0,padding:0,position:"absolute",[c?"height":"width"]:"100%",[c?"top":"left"]:0,[c?y()?"right":"left":"top"]:i,visibility:s?"hidden":"visible"};return c&&(e.display="flex"),e}),[i,s]),children:n})})),X=()=>[],Y=()=>t.useReducer(X,void 0,X)[1],G=t.forwardRef((({children:r,overscan:o=4,initialItemSize:i,initialItemCount:s,shift:c,horizontal:u,reverse:d,cache:h,components:{Root:f=E,Item:_="div"}=L,onScroll:w,onScrollStop:g,onRangeChange:p,...m},v)=>{const b=t.useMemo((()=>q(r)),[r]),S=b.length,I=N(w),z=N(g),[x,y,R,k]=D((()=>{const e=!!u,t=O(S,i,s,h,!!d,!i);return[t,U(t,e),H(t,e),e]}));S!==x.I()&&x.W(3,[S,c]);const T=Y(),[M,J]=x.g(),$=x.O(),P=x.M(),V=x.T(),A=t.useRef(null),X=0!==$;C((()=>{const e=A[W],t=y.D(e),r=R.L(e),o=x.J(3,(e=>{e?n.flushSync(T):T()})),i=x.J(4,(()=>{I[W]&&I[W](x.R())}));return()=>{t(),r(),o(),i()}}),[]),C((()=>{const e=x.H();e&&R.j(e)}),[P]),t.useEffect((()=>{X||z[W]&&z[W]()}),[X]),t.useEffect((()=>{p&&p(M,J)}),[M,J]),t.useImperativeHandle(v,(()=>({get cache(){return x._()},get scrollOffset(){return x.R()},get scrollSize(){return x.T()},get viewportSize(){return x.C()},scrollToIndex:R.B,scrollTo:R.$,scrollBy:R.q})),[]);const G=B(M,o,$),K=j(J,o,$,S),Q=[];for(let t=G;t<=K;t++){const n=b[t],r=n.key;Q.push(e.jsx(F,{U:y,V:t,A:x.v(t),F:x.p(t),X:_,P:n,Y:k},a(r)?r:"_"+t))}return e.jsx(f,{ref:A,width:k?V:void 0,height:k?void 0:V,scrolling:X,attrs:t.useMemo((()=>({...m,style:{overflow:"auto",display:k?"inline-block":"block",contain:"strict",width:"100%",height:"100%",...m.style}})),l(m)),children:Q})})),K=(e,t)=>`${e}-${t}`,Q=t.memo((({P:n,U:r,G:o,K:i,Z:s,ee:l,te:c,ne:u,F:d,X:a})=>{const h=t.useRef(null);return C((()=>r.N(h[W],o,i)),[i,o]),e.jsx(a,{ref:h,style:t.useMemo((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:s,[y()?"right":"left"]:l,visibility:d?"hidden":"visible",minHeight:c,minWidth:u})),[s,l,u,c,d]),children:n})})),Z=t.forwardRef((({children:r,row:o,col:i,cellHeight:s=40,cellWidth:c=100,overscan:u=2,initialRowCount:d,initialColCount:a,components:{Root:h=E,Cell:f="div"}=L,..._},w)=>{const[g,p,m,v,b]=D((()=>{const e=O(o,s,d),t=O(i,c,a);return[e,t,A(e,t),H(e,!1),H(t,!0)]}));o!==g.I()&&g.W(3,[o]),i!==p.I()&&p.W(3,[i]);const S=Y(),[I,z]=g.g(),[x,y]=p.g(),R=g.O(),k=p.O(),T=g.M(),M=p.M(),J=g.T(),$=p.T(),q=t.useRef(null),N=0!==R,P=0!==k;C((()=>{const e=q[W],t=m.D(e),r=v.L(e),o=b.L(e),i=e=>{e?n.flushSync(S):S()},s=g.J(3,i),l=p.J(3,i);return()=>{t(),r(),o(),s(),l()}}),[]),C((()=>{const e=g.H();e&&v.j(e)}),[T]),C((()=>{const e=p.H();e&&b.j(e)}),[M]),t.useImperativeHandle(w,(()=>({get scrollOffset(){return[p.R(),g.R()]},get scrollSize(){return[p.T(),g.T()]},get viewportSize(){return[p.C(),g.C()]},scrollToIndex(e,t){b.B(e),v.B(t)},scrollTo(e,t){b.$(e),v.$(t)},scrollBy(e,t){b.q(e),v.q(t)}})),[]);const U=t.useMemo((()=>{const e=new Map;return(t,n)=>{let o=e.get(K(t,n));return o||e.set(K(t,n),o=r({rowIndex:t,colIndex:n})),o}}),[r]),V=B(I,u,R),F=j(z,u,R,o),X=B(x,u,k),G=j(y,u,k,i),Z=[];for(let t=V;t<=F;t++)for(let n=X;n<=G;n++)Z.push(e.jsx(Q,{U:m,G:t,K:n,Z:g.v(t),ee:p.v(n),te:g.S(t),ne:p.S(n),F:g.p(t)||p.p(n),X:f,P:U(t,n)},K(t,n)));return e.jsx(h,{ref:q,width:$,height:J,scrolling:N||P,attrs:t.useMemo((()=>({..._,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",..._.style}})),l(_)),children:Z})})),ee=t.forwardRef((({children:r,overscan:o=4,initialItemSize:i,initialItemCount:s,horizontal:c,cache:u,components:{Root:d=E,Item:h="div"}=L,onScrollStop:f,onRangeChange:_,...w},g)=>{const p=t.useMemo((()=>q(r)),[r]),m=p.length,v=N(f),[b,S,I,z]=D((()=>{const e=!!c,t=O(m,i,s,u,!1,!i);return[t,V(t,e),J(t,e),e]}));m!==b.I()&&b.W(3,[m]);const x=Y(),[y,R]=b.g(),k=b.O(),T=b.M(),M=b.T(),H=t.useRef(null),$=0!==k;C((()=>{const e=H[W],t=S.D(e),r=I.L(e);return b.J(3,(e=>{e?n.flushSync(x):x()})),()=>{t(),r()}}),[]),C((()=>{const e=b.H();e&&I.j(e)}),[T]),t.useEffect((()=>{$||v[W]&&v[W]()}),[$]),t.useEffect((()=>{_&&_(y,R)}),[y,R]),t.useImperativeHandle(g,(()=>({get cache(){return b._()}})),[]);const P=B(y,o,k),U=j(R,o,k,m),A=[];for(let t=P;t<=U;t++){const n=p[t],r=n.key;A.push(e.jsx(F,{U:S,V:t,A:b.v(t),F:b.p(t),X:h,P:n,Y:z},a(r)?r:"_"+t))}return e.jsx(d,{ref:H,width:z?M:void 0,height:z?void 0:M,scrolling:$,attrs:t.useMemo((()=>({...w,style:{display:z?"inline-block":"block",width:z?"auto":"100%",height:z?"100%":"auto",...w.style}})),l(w)),children:A})}));exports.VGrid=Z,exports.VList=G,exports.WVList=ee;
//# sourceMappingURL=index.js.map
